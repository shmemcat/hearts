/* Hand display — curved fan layout */

.hand {
   display: flex;
   flex-wrap: nowrap;
   align-items: flex-end;
   justify-content: center;
   gap: 0;
   margin-top: 16px;
   padding: 0 8px 24px;
}
.handCardWrap {
   display: inline-block;
   transition: transform 0.25s ease, margin 0.25s ease;
   transform-origin: center bottom;
   margin: 0 -12px;
}
.handCardWrap:first-child {
   margin-left: 0;
}
.handCardWrap:last-child {
   margin-right: 0;
}
.handCardWrap:hover:has(button:not(:disabled)) {
   z-index: 1;
}

.handSlotEmpty {
   width: 72px;
   min-width: 72px;
   height: 100px;
   border: 2px dashed var(--trickslotempty);
   border-radius: 8px;
   background: transparent;
}

/* Stack the empty hand slot behind the fanned cards */
.handStack {
   display: grid;
}
.handStack > * {
   grid-column: 1;
   grid-row: 1;
}

/* ── Hand deal-in animation ─────────────────────────────── */
.handDealIn {
   animation: handDealIn 0.35s ease-out;
}
@keyframes handDealIn {
   from {
      opacity: 0;
      transform: scale(0.3);
   }
   to {
      opacity: 1;
      transform: scale(1);
   }
}

/* ── Hand card pass transition animations ─────────────── */

/* Exit: cards sliding out of hand in pass direction */
.handExitLeft {
   animation: handExitLeft 0.35s ease-in forwards;
}
.handExitRight {
   animation: handExitRight 0.35s ease-in forwards;
}
.handExitUp {
   animation: handExitUp 0.35s ease-in forwards;
}

@keyframes handExitLeft {
   from {
      opacity: 1;
      transform: translateX(0);
   }
   to {
      opacity: 0;
      transform: translateX(-40px);
   }
}
@keyframes handExitRight {
   from {
      opacity: 1;
      transform: translateX(0);
   }
   to {
      opacity: 0;
      transform: translateX(40px);
   }
}
@keyframes handExitUp {
   from {
      opacity: 1;
      transform: translateY(0);
   }
   to {
      opacity: 0;
      transform: translateY(-40px);
   }
}

/* Enter + settle: received cards slide in, hold raised, then ease back down */
.handEnterFromLeft {
   animation: handEnterFromLeft 1.6s ease-out forwards;
}
.handEnterFromRight {
   animation: handEnterFromRight 1.6s ease-out forwards;
}
.handEnterFromAbove {
   animation: handEnterFromAbove 1.6s ease-out forwards;
}

@keyframes handEnterFromLeft {
   0% {
      opacity: 0;
      transform: translate(-35px, -6px);
   }
   18.75% {
      opacity: 1;
      transform: translate(0, -6px);
   }
   81.25% {
      opacity: 1;
      transform: translate(0, -6px);
   }
   100% {
      opacity: 1;
      transform: translate(0, 0);
   }
}
@keyframes handEnterFromRight {
   0% {
      opacity: 0;
      transform: translate(35px, -6px);
   }
   18.75% {
      opacity: 1;
      transform: translate(0, -6px);
   }
   81.25% {
      opacity: 1;
      transform: translate(0, -6px);
   }
   100% {
      opacity: 1;
      transform: translate(0, 0);
   }
}
@keyframes handEnterFromAbove {
   0% {
      opacity: 0;
      transform: translate(0, -35px);
   }
   18.75% {
      opacity: 1;
      transform: translate(0, -6px);
   }
   81.25% {
      opacity: 1;
      transform: translate(0, -6px);
   }
   100% {
      opacity: 1;
      transform: translate(0, 0);
   }
}

/* Border highlight on received cards during enter+settle */
.handEnterFromLeft > button,
.handEnterFromRight > button,
.handEnterFromAbove > button {
   animation: handEnterBorderPulse 1.6s ease-out;
}

@keyframes handEnterBorderPulse {
   0% {
      border-color: var(--cardhighlight);
   }
   81.25% {
      border-color: var(--cardhighlight);
   }
   100% {
      border-color: var(--cardborder);
   }
}

/* ── Mobile: fixed hand at bottom + smoosh ─────────────── */
@media only screen and (max-width: 768px) {
   .hand {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
      margin-top: 0;
      padding: 0 16px 24px;
      justify-content: center;
   }
   .handCardWrap {
      margin: 0 -23.5px;
   }
   .handCardWrap:first-child {
      margin-left: 0 !important;
   }
   .handCardWrap:last-child {
      margin-right: 0 !important;
   }
   .handSlotEmpty {
      display: none;
   }
   .handStack {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 20;
   }
   .handCardWrap:hover,
   .handCardWrap:hover:has(button:not(:disabled)) {
      z-index: auto;
   }

   /* ── Two-row layout (8+ cards) ──────────────────────── */
   .handTwoRow {
      position: fixed;
      bottom: 0px;
      left: 0;
      right: 0;
      z-index: 20;
      display: flex;
      flex-direction: column;
      align-items: center;
      transform: translateY(30px);
   }
   .handBackRow,
   .handFrontRow {
      display: flex;
      flex-wrap: nowrap;
      align-items: flex-end;
      justify-content: center;
      gap: 0;
      padding: 0 16px;
      width: 100%;
   }
   .handFrontRow {
      margin-top: -35px;
      position: relative;
      z-index: 1;
   }
   .handBackRow .handCardWrap,
   .handFrontRow .handCardWrap {
      position: relative;
      z-index: 0;
   }
   .handBackRow .handCardWrap:first-child,
   .handFrontRow .handCardWrap:first-child {
      margin-left: 0 !important;
   }
   .handBackRow .handCardWrap:last-child,
   .handFrontRow .handCardWrap:last-child {
      margin-right: 0 !important;
   }
}
